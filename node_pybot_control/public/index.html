<html>
<head>
	<script src="socket.io/socket.io.js"></script>

	<style type="text/css">
		@media screen and (orientation:portrait) {
			#vidContainer {
				width: 99%;
				height: 50%;
				padding: 0;
				margin:0;
			}

			#tblContainer {
				width: 99%;
				margin-top:10px;
				margin-left: auto;
				margin-right: auto;
			}

		}

		@media screen and (orientation:landscape) {
			@media screen and (min-device-width: 768px) and (max-device-width: 1824px) {
				#vidContainer {
                		        width: 75%;
					height: 80%;
                		        padding: 0;
		                        margin:0;
                		}

		                #tblContainer {
                		        width: 24%;
		                        margin-left: auto;
                		        margin-right: auto;
		                }

			}

			@media screen and (max-device-width: 767px) {
				#vidContainer {
                		        width: 70%;
					height: 78%;
                		        padding: 0;
		                        margin:0;
                		}

		                #tblContainer {
                		        width: 29%;
		                        margin-left: auto;
                		        margin-right: auto;
		                }

			}


		}

		.container {
			float: left;
		}


		#tblContainer td {
			max-width: 33%;
		}

		#tblContainer td img {
			width: 95%;
		}

	</style>
</head>
<body>
	<h1 style="text-align:center">Pi-Bot Remote Control</h1>

	<!-- Video View -->
	<div class="container" id="vidContainer">
		<video style="width: 100%; height:100%" autoplay>
			<source src="http://192.168.0.16:9080/stream/video.mjpeg" type="video/mp4">
			Your browser does not support the video tag.
		</video>
	</div>

	<div class="container" id="tblContainer">
		<table id="buttonsTable" cellpadding="0' cellspacing="0">
		    <tr>
		            <td></td>
		            <td><img src="images/arrow_blue_up.png" id="fwdButton" onclick="forward()" /></td>
		            <td></td>
		    </tr>
		    <tr>
		            <td><img src="images/arrow_blue_left.png" id="lftButton" onclick="left()" /></td>
		            <td><img src="images/Stop-Button.png" id="stpButton" onclick="stop()" /></td>
		            <td><img src="images/arrow_blue_right.png" id="rgtButton" onclick="right()" /></td>
		    </tr>
		    <tr>
		            <td></td>
		            <td><img src="images/arrow_blue_down.png" id="rvsButton" onclick="reverse()" /></td>
		            <td></td>
		    </tr>

		</table>

		<p style="text-align:right"><button type="button" onclick="autonomous()">Autonomous</button></p>
	</div>

	<div style="float:none; clear:both">&nbsp;</div>

</div>

<script type="text/javascript">
var socket = io.connect();

function forward()
{
	socket.emit('drive', { value: 'forward' });
}
function stop()
{
	socket.emit('drive', { value: 'stop' });
}
function left()
{
	socket.emit('drive', { value: 'left' });
}
function right()
{
	socket.emit('drive', { value: 'right' });
}
function reverse()
{
	socket.emit('drive', { value: 'reverse' });
}
function autonomous()
{
	socket.emit('drive', { value: 'autonomous' });
}

document.onkeyup = checkKey;

function checkKey(e) {

    e = e || window.event;

    if (e.keyCode == '38') {
        forward();
    }
    else if (e.keyCode == '40') {
        reverse();
    }
    else if (e.keyCode == '37') {
       left();
    }
    else if (e.keyCode == '39') {
       right();
    }
    else if (e.keyCode == '65') {
       autonomous();
    }
    else {
	stop();
    }

}
</script>
</body>
</html>
